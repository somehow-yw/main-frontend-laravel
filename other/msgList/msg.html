<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <meta name='viewport' content='width=device-width,initial-scale=1.0,user-scalable=no'>    <meta name="renderer" content="webkit">    <title>123</title>    <style>        *{            margin: 0;padding: 0;            -webkit-tap-highlight-color:rgba(255,255,255,0);            -webkit-appearance: none;            -webkit-text-size-adjust:none;            background-color: transparent;            font-size: 13px;            color: #3d3d3d;        }        .container {            /*width: 500px;*/            height: 400px;        }        .msg-list {            height: 400px;            overflow-y: auto;        }        .send-info textarea {            padding: 10px 10px 20px 10px;            width: 100%;            height: 100%;            border: none;            -webkit-box-sizing: border-box;            -moz-box-sizing: border-box;            -ms-box-sizing: border-box;            -o-box-sizing: border-box;            box-sizing: border-box;            outline: none;        }        .msg-list li {            line-height: 1.6;            margin-bottom: 10px;        }        .msg-list .not {            font-weight: 700;        }        .msg-list .status {            margin: 0 5px;        }    </style></head><body><div id="container" class="container">    <ul id="msgList" class="msg-list">    </ul></div><script>    (function() {        var session_id = '{session_id}',//            width = '{$width}',//            height = '{$height}',            width = 500,            height = 500,            listWrap = document.getElementById('msgList')            wrap = document.getElementById('container');        wrap.style.width = width + 'px';        wrap.style.height = height + 'px';        function ajax(obj) {            var url = obj.url,                    type = obj.type ? obj.type : 'get',                    success = obj.success ? obj.success : function(){},                    error = obj.error ? obj.error : function(){},                    async = obj.async ? obj.async : true;            //先声明一个异步请求对象            var xmlHttpReg = null;            //如果是IE;            if (window.ActiveXObject) {                xmlHttpReg = new ActiveXObject("Microsoft.XMLHTTP");            }else if (window.XMLHttpRequest) {                xmlHttpReg = new XMLHttpRequest(); //实例化一个xmlHttpReg            }            //如果实例化成功,就调用open()方法,就开始准备向服务器发送请求            if (xmlHttpReg != null) {                if(type == 'get' || type == 'GET') {                    var data = obj.data ? '?' + obj.data : '';                    xmlHttpReg.open("get", url+data, async);                    xmlHttpReg.send(null);                    xmlHttpReg.onreadystatechange = doResult; //设置回调函数                }else if(type == 'post' || type == 'POST') {                    var data = obj.data ? obj.data : '';                    xmlHttpReg.open("post", url, async);                    xmlHttpReg.send(data);                    xmlHttpReg.onreadystatechange = doResult; //设置回调函数                }            }            //回调函数            //一旦readyState的值改变,将会调用这个函数,readyState=4表示完成相应            //设定函数doResult()            function doResult() {                //4代表执行完成;                if (xmlHttpReg.readyState == 4) {                    //200代表执行成功;                    if (xmlHttpReg.status == 200) {                        //将xmlHttpReg.responseText的值赋给ID为resText的元素;                        success(xmlHttpReg.responseText);                    }else {                        error(xmlHttpReg);                    }                }            }        }        //获取交谈数据;        function getMsgList() {            ajax({                url: 'mesList.json',//                url: '/app/sys-msg/list',                type: 'get',                data: 'session_id='+session_id,                success: function(res) {                    var data = JSON.parse(res), list = data.data, str = '';                    for(var i = 0 ; i < list.length ; i++) {                        str += '<li class="'+(list[i].read_status == 1 ? 'not' : 'has')+'">'+                                list[i].msg_content+'<span class="status">'+(list[i].read_status == 1 ? '(未读)' : '(已读)')+                                '</span><span class="time">'+list[i].updated_at+'</span></li>';                    }                    listWrap.innerHTML = str;                }            });        }        getMsgList();        setInterval()    })();</script></body></html>